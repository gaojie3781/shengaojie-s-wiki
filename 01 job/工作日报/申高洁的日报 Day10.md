
今日学习内容：
1. 学习了银行核心系统 CBS 的相关知识		
	* ​银行核心系统的发展历史
	* 银行核心系统的架构：基于账户服务、基础服务中枢及会计账务三大模块
	* 详细介绍了客户信息管理系统，主要包括：其功能和对于客户实体之间的关系
	* 三类银行账户：存款账户、贷款账户和内部账户
	* 存款核心系统：
	* 贷款核心系统：功能和主要的流程
	* 支付清算：行内支付、跨行支付、清算和对账
2.  linux 中系统管理相关的命令
	* ps命令常见的选项含义，常用的命令形式
	* top和 ps 的区别，top 的相互形式
	* df查看磁盘使用情况

# 银行核心系统发展历史

**手工记账时代**（20世纪前）：早期银行业务依赖纸质账本和手工记录方式，存在效率低下且易出错的问题。例如，19世纪的银行通过账簿管理存贷款业务，清算环节需人工逐笔核对，处理效率极低。

**机械化与早期计算机化**（1950s-1960s）：20世纪50年代，IBM等公司推出机电式记账机，通过穿孔卡片技术实现交易数据的机械化处理，业务效率得到初步提升。

**实时处理与网络化**（1970s-1980s）：随着关系型数据库技术的成熟和网络基础设施的完善，银行逐步实现联机交易处理，客户数据可实时更新，业务响应速度显著提升。

**标准化与模块化**（1990s后）：随着银行业务复杂化，核心系统向模块化设计演进，典型产品如Flexcube、[TemenosT24](https://zhida.zhihu.com/search?content_id=262168549&content_type=Article&match_order=1&q=TemenosT24&zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NTgwNzI3OTcsInEiOiJUZW1lbm9zVDI0IiwiemhpZGFfc291cmNlIjoiZW50aXR5IiwiY29udGVudF9pZCI6MjYyMTY4NTQ5LCJjb250ZW50X3R5cGUiOiJBcnRpY2xlIiwibWF0Y2hfb3JkZXIiOjEsInpkX3Rva2VuIjpudWxsfQ.TIwcNm7yq4mr_E6QgqRWvA8k4kAJAE30P00XTOUWEOQ&zhida_source=entity)等，支持存款、贷款、支付等功能的灵活组合与快速部署。系统通过标准化接口实现与外围系统的无缝对接，降低集成成本，提升业务扩展性。

**现代技术演进**：云计算、微服务架构，如蚂蚁集团[OceanBase](https://zhida.zhihu.com/search?content_id=262168549&content_type=Article&match_order=1&q=OceanBase&zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NTgwNzI3OTcsInEiOiJPY2VhbkJhc2UiLCJ6aGlkYV9zb3VyY2UiOiJlbnRpdHkiLCJjb250ZW50X2lkIjoyNjIxNjg1NDksImNvbnRlbnRfdHlwZSI6IkFydGljbGUiLCJtYXRjaF9vcmRlciI6MSwiemRfdG9rZW4iOm51bGx9.j0qeeDgVHnO5g18ani1seG0DK23nTkxZW5bvWrJLSVw&zhida_source=entity)，逐步替代传统集中式系统，提升系统弹性与可扩展性。核心系统通过API与第三方服务，如支付、征信、电商，深度融合，构建开放金融服务平台，推动场景化金融服务创新。



# 银行系统核心架构

核心系统架构逐渐从集中式向分布式转型，功能定位也从早期的"大而全"模式向"瘦核心"模式转变，**聚焦于账户服务、基础服务中枢及会计账务处理三大核心能力**。

![[Pasted image 20250915093557.png]]
账户管理：实现客户信息管理、存款账户与贷款账户的全生命周期管理；
交易处理：支持实时存取款、转账汇款、资金清算等核心交易，确保交易处理的时效性与准确性。
总账与核算：自动生成资产负债表、利润表等法定财务报表，通过账务核对机制保障数据一致性。



# 客户信息管理


## 主要功能
功能：客户信息管理模块主要涵盖主**数据管理、客户关系维护、客户分层运营及风险合规管控**四大核心功能，具体功能详见下表：

| 功能类别    | 具体能力                                                   |
| ------- | ------------------------------------------------------ |
| 客户主数据管理 | 存储客户基础信息 (姓名、身份证件号码、联系方式)、职业信息、收入水平及风险承受等级等核心数据。       |
| 客户关系管理  | 管理客户与账户的绑定关系，涵盖个人客户、企业客户、联名账户、家庭账户及集团客户等多元类型。          |
| 客户分层与标签 | VIP 客户识别与客户价值分层 (高净值客户、普通客户)，标注交易行为特征标签 (如频繁转账、理财偏好等)。 |
| 风险与合规   | 实施黑名单管理、反洗钱监控 (含大额交易预警机制) 及客户信用评分体系。                   |
| 数据整合    | 与信贷系统、存款系统、支付系统等外围系统对接，保障跨系统数据一致性。                     |
| 审计与历史记录 | 记录客户信息变更轨迹 (如地址更新等)，维护操作日志 (含修改人、修改时间及修改内容)。           |

## 客户数据实体

![[CleanShot 2025-09-15 at 09.40.19@2x.png]]


# 三类银行账户

可以将银行账户分为存款账户、贷款账户、内部账户三大类


## 存款账户

专注于客户存款账户的全生命周期管理，核心功能包括：**资金存管**，实现客户存款的安全存储与流动性管理；`利息计算`，支持活期、定期存款的自动化计息处理；`账户控制`，提供资金支取、账户冻结、解冻等操作权限管理。



## 贷款账户

负责全流程信贷业务管理，核心功能涵盖：**授信执行管控贷款发放流程**，确保合规性与风险可控；`还款管理`支持本金、利息还款计划执行与异常监控；`贷后运营提供贷款展期审批`、不良资产清收及资产处置等延伸服务。


## 内部账户
承担银行内部资金流转与财务核算核心职能，具体功能包括：**资金调拨管理实现行内各账户间的资金划转与头寸调度**；损益精准核算完成收入、成本、利得及损失的自动化账务处理；清算过渡支撑提供跨系统清算前的资金暂记与对账缓冲机制。


# 存款核心

核心模块是银行核心系统的重要组成部分，是银行负债端资金来源的核心载体，承担着客户存款资产的直接管理职能，并与贷款、支付、清算等模块实现深度协同。其具备如下的业务职能：

|   功能模块   | 功能描述                   | 子功能       | 基本逻辑                   |
| :------: | ---------------------- | --------- | ---------------------- |
|   账户管理   | 支持活期、定期、储蓄等账户的全生命周期管理。 | 活期存款开户    | 实时开户，支持随时存取            |
|          |                        | 定期存款自动转存  | 到期后按原存期和利率自动续存         |
|          |                        | 部分提前支取    | 定期存款允许部分提前支取，剩余金额保持原利率 |
|   利率管理   | 动态配置利率规则，支持差异化定价。      | 固定利率      | 存期内利率不变                |
|          |                        | 浮动利率（LPR） | 利率随市场基准浮动              |
|          |                        | 差异化定价     | 根据客户等级设置不同利率           |
| 创新存款产品支持 | 扩展传统存款，满足客户投资需求        | 大额存单      | 起存金额高（20 万 +），利率上浮     |
|          |                        | 结构性存款     | 挂钩衍生品（如黄金、汇率），保本浮动收益   |
| 利息计算与处理  | 精准计算利息，支持复杂规则。         | 按日计息（活期）  | 每日余额 × 日利率（年利率 / 360）  |
|          |                        | 复利计算      | 利息滚入本金再计息              |
|          |                        | 利息税代扣     | 按国家政策代扣 20% 利息税        |
|  批量结息处理  | 周期性结息，生成会计账务           | 季度结息（活期）  | 每季度末月 20 日批量计算并入账      |
|          |                        | 到期结息（定期）  | 本金 + 利息一次性支付           |


# 贷款核心

承担着信贷资产全生命周期管理职能，涵盖贷款发放、回收及风险管控等关键环节，直接决定银行的利息收入规模与资产质量健康度，其具备如下的功能矩阵：


## 贷款流程

1. 信贷录入
2. 会计审核
	* 一般贷款账户
	* 特殊贷款账户
3. 贷款放贷
4. 贷款计息
5. 贷款还款
6. 到期处理
	* 结清销户
	* 结转逾期
	* **贷款展期**: 借款人在贷款到期时，因暂时无法按时足额偿还本金或利息，向贷款机构（如银行、金融公司等）申请延长还款期限的操作
7. 形态转移
	- **自动转移**：由系统根据预设规则（如逾期天数、还款情况等）**自动触发**。例如：贷款逾期 90 天以上，系统自动将其从 “正常类” 转移为 “次级类”，无需人工干预。
	- **强制转移**：由人工**主动发起**，通常是系统规则无法覆盖的特殊情况。例如：借款人出现重大经营风险（如破产前兆），银行判断贷款风险骤增，人工强制将其从 “关注类” 升级为 “可疑类”。
8. 特殊处理：是针对贷款在形态转移后，出现的**非常规、需要特殊策略应对的情况**所进行的操作，是对贷款后续管理的补充性环节
	- **形态逆转**：  
	    若贷款形态转移后，借款人的还款情况、经营状况等**由差转好**，可将贷款的风险形态 “逆转” 回更优等级。例如：原本因逾期被转移为 “次级类贷款”，但借款人后续连续正常还款 6 个月，经审核后，形态逆转回 “关注类” 甚至 “正常类”。
	- **逾期展期**：  
	    贷款已发生逾期，但借款人仍有还款意愿，且能提供合理的展期理由（如疫情导致经营暂时困难），可申请 **“逾期状态下的展期”**（延长还款期限）。与 “正常展期”（到期前申请）不同，逾期展期是对 “已逾期但有挽救可能” 的贷款的特殊处理。
9. **贷款核销**：在贷款业务中，当金融机构经过评估和审核，确认某笔贷款无法收回或者收回的可能性极低时，按照规定的流程和标准，将这笔贷款从资产负债表等账务记录中予以消除 ，也就是在账面上注销该笔贷款。这是金融机构对不良贷款进行处理的一种手段。
	* 核销归还：指在贷款已经被核销之后，如果金融机构又收回了部分或全部之前已核销的贷款资金，需要对这部分收回的资金进行相应的账务处理。


# 支付清算


## 主要功能
承担全渠道资金流转通道职能，是联结客户、银行、央行及第三方支付机构的金融基础设施核心枢纽。

| 功能模块  | 描述                 | 子功能        |                      |                               |
| ----- | ------------------ | ---------- | -------------------- | ----------------------------- |
| 行内支付  | 处理银行内部账户间的资金划转。    | 同行转账       | 实时到账，零手续费            | 客户 A 向客户 B（同银行）转账 1 万元，秒级到账   |
|       |                    | 批量代发工资     | 企业上传文件，系统批量处理        | 企业 C 每月 5 日代发 5,000 名员工工资     |
|       |                    | 代扣公用事业费    | 签约自动扣款，支持失败重试        | 客户 D 的水电费每月自动从账户扣缴            |
| 跨行支付  | 处理不同银行或支付机构间的资金往来。 | 央行大额支付系统   | 单笔≥5 万元，实时全额清算（RTGS） | 客户 E 跨行转账 50 万元，通过 CNAPS 实时到账 |
|       |                    | 小额批量系统     | 单笔 < 5 万元，定时批量清算     | 客户 F 的跨行信用卡还款，次日到账            |
|       |                    | SWIFT 跨境支付 | 处理外汇汇款，需中转行          | 客户 G 向美国汇款 1 万美元，经 SWIFT 通道   |
|       |                    | 第三方支付对接    | 与支付宝 / 微信直连，支持快捷支付   | 客户 H 通过微信绑定银行卡充值 1,000 元      |
| 清算与对账 | 确保银行与外部机构资金账务一致。   | 日终清算       | 汇总当日交易，与央行 / 同业核对头寸  | 银行当日跨行支付净额 + 1.2 亿，需调整准备金     |
|       |                    | 第三方支付对账    | 比对银行与支付宝的交易流水，处理差异   | 发现微信支付漏记一笔 100 元订单，补录         |
|       |                    | 差错处理（长款短款） | 系统自动挂账，人工干预调整        | 客户多扣款 200 元，原路退回              |

**清算（Settlement）**：指银行与外部机构，如央行、同业银行、第三方支付平台之间进行的资金划拨与头寸结算操作，旨在确保交易双方的账务平衡及资金流转的准确性。**从时序上看是清算在前，对账在后**

**对账（Reconciliation）**：指通过比对银行内部账务记录与外部机构提供的数据，识别并处理两者间的差异，以保障账实相符，维护财务数据的真实性。


# ps

```bash
ps -u shengaojie   # 查看某个用户的所有的进程
```

```bash
ps -ef  # 全格式显示所有进程，适合查看进程详细信息（如查找某服务的PID）
ps aux  #  BSD风格，显示所有进程（包括无终端的），包含CPU和内存使用率
```


```bash
ps aux --sort=-%cpu | head -n 6  # --sort=-%cpu 按CPU倒序，head -n6 取前6行（含表头）
```

# top

ps 命令可以一次性给出当前系统中进程状态，但使用此方式得到的信息缺乏时效性。如果需要实时的监控程序的运行情况，可以通过 top 命令，该命令可以**实时的动态刷新进程的执行情况**。

```bash
top -p PID
```

# df

df 命令，用于显示 Linux 系统中各文件系统的硬盘使用情况，包括文件系统所在硬盘分区的总容量、已使用的容量、剩余容量等。

```bash
df -h   # 按照人类可读的单位显示
```
