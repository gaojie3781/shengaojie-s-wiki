
## 一、Vim 基础认知

### 1.1 什么是 Vim

Vim（Vi IMproved）是基于 Vi 开发的高效文本编辑器，以 “模式化操作” 和 “高度可定制” 为核心特点，广泛用于代码编写、配置文件修改等场景，支持 Linux、Windows、macOS 等多平台。

### 1.2 Vi 与 Vim 的关系

- **Vi**：Unix 系统原生编辑器，仅支持基础编辑功能，是 Vim 的前身。

- **Vim**：Vi 的增强版，保留 Vi 所有操作的同时，新增语法高亮、代码折叠、多窗口编辑、插件支持等功能，完全兼容 Vi 操作。

### 1.3 安装方法

#### （1）Linux 系统

- Debian/Ubuntu：`sudo apt update && sudo apt install vim`

- CentOS/RHEL：`sudo yum install vim-enhanced`

#### （2）Windows 系统

前往[Vim 官方](https://www.vim.org/download.php)[网站](https://www.vim.org/download.php)下载安装包，按向导完成安装即可。

## 二、核心工作模式

Vim 的核心效率来自 “模式分离”，不同模式下操作逻辑不同，需熟练切换。

### 2.1 三种基础模式  🌟 🌟 🌟 🌟 🌟

| 模式名称 | 进入方式        | 核心功能            | 退出方式                  |
| ---- | ----------- | --------------- | --------------------- |
| 命令模式 | Vim 启动默认进入  | 光标移动、文本选择、快捷操作  | 按i/a/o进入插入模式；按:进入底行模式 |
| 插入模式 | 命令模式下按i/a/o | 输入文本内容          | 按Esc返回命令模式            |
| 底行模式 | 命令模式下按:     | 执行保存、退出、查找替换等命令 | 按Esc返回命令模式            |

### 2.2 可视化模式（扩展模式）

命令模式下进入，用于批量操作文本：

- 字符可视化：按v，选中单个字符范围

- 行可视化：按Shift+v，选中整行内容

- 块可视化：按Ctrl+v，选中矩形区域（批量添加前缀 / 删除等场景常用）

## 三、常用操作速查

### 3.1 光标移动（命令模式）

#### （1）基础移动

- h：向左移动 1 个字符

- j：向下移动 1 个字符

- k：向上移动 1 个字符

- l：向右移动 1 个字符

#### （2）高效移动  🌟🌟🌟🌟🌟

- 按单词：w（到下一个单词开头）、e（到当前单词结尾）、b（到上一个单词开头）

- **按行：0（行首）、$（行尾）、gg（文件开头）、G（文件结尾）、nG（到第 n 行，如5G到第 5 行）**

- 按屏幕：Ctrl+b（向上翻页）、Ctrl+f（向下翻页）、H（屏幕顶部）、M（屏幕中间）、L（屏幕底部）

### 3.2 文本编辑（命令模式）🌟🌟🌟🌟🌟

#### （1）删除操作

- x：删除光标所在字符

- dd：删除当前行

- ndd：删除从当前行开始的 n 行（如3dd删除 3 行）

- dw：删除光标所在单词

- d$：删除从光标到行尾的内容

#### （2）复制与粘贴

- 复制：yy（复制当前行）、nyy（复制 n 行，如2yy复制 2 行）

- 粘贴：p（光标后粘贴）、P（光标前粘贴）

#### （3）撤销与重做

- u：撤销上一次操作

- Ctrl+r：恢复撤销的操作（重做）

#### （4）插入文本（命令模式→插入模式）

- i：在光标前插入

- a：在光标后插入

- o：在当前行下方新建一行插入

- O：在当前行上方新建一行插入

### 3.3 查找与替换（底行模式）

#### （1）查找

- 正向查找：: /pattern（如: /hello查找 “hello”），按n下一个匹配，N上一个匹配

- 反向查找：: ?pattern，按n上一个匹配，N下一个匹配

#### （2）替换

- 单行替换：: s/old/new（替换当前行第一个 “old” 为 “new”）

- 单行全替换：: s/old/new/g（当前行所有 “old” 替换为 “new”）

- 全局替换：: %s/old/new/g（整个文件所有 “old” 替换为 “new”）

- 确认替换：: %s/old/new/gc（每处替换前询问，y确认，n跳过）

### 3.4 多窗口操作（命令模式）

#### （1）窗口分割

- 水平分割：: split（缩写: sp），分割后显示当前文件

- 垂直分割：: vsplit（缩写: vsp），垂直分割当前文件

- 分割打开新文件：: sp filename 或 : vsp filename

#### （2）窗口切换

- 切换方向：Ctrl+w 后按 h/j/k/l（对应左 / 下 / 上 / 右窗口）

- 窗口调整：Ctrl+w +（放大窗口）、Ctrl+w -（缩小窗口）

### 3.5 文件操作（底行模式）

- 保存：: w（保存当前文件）、: w filename（另存为 filename）

- 退出：: q（无修改时退出）、: q!（强制退出不保存）

- 保存并退出：: wq（缩写: x）

- 放弃修改：: e!（撤销所有未保存的修改，恢复到上次保存状态）

## 四、进阶实用技巧

### 4.1 批量注释与取消注释

以 Shell 脚本（注释符#）为例：

1. 进入行可视化模式：Shift+v

2. 选中需要注释的行

3. 批量注释：: s/^/#/（在行首添加#）

4. 取消注释：: s/^#//（删除行首的#）

### 4.2 显示 / 隐藏行号

- 临时显示：: set number（缩写: set nu）

- 临时隐藏：: set nonumber（缩写: set nonu）

- 永久生效：在配置文件.vimrc中添加set number

### 4.3 在 Vim 中执行 Linux 命令

底行模式下按!+ 命令即可，例如：

- 查看目录文件：: !ls

- 查看系统时间：: !date

- 执行后按回车返回 Vim 编辑界面

## 五、个性化配置（.vimrc）

.vimrc是 Vim 的用户级配置文件，位于用户主目录（~/.vimrc），不存在可手动创建。以下是常用配置项：

```bash
" 基础配置​
set number " 显示行号​
syntax on " 开启语法高亮​
set encoding=utf-8 " 设置编码为UTF-8​
set tabstop=4 " 设置Tab键宽度为4个空格​
set shiftwidth=4 " 自动缩进宽度为4个空格​
set expandtab " 将Tab键转换为空格​
set autoindent " 自动缩进（新行继承上一行缩进）​
set cursorline " 高亮光标所在行​
set wrap " 自动换行​
set hlsearch " 高亮显示查找结果​


" 自定义快捷键（示例）​
map <F2> :w<CR> " 按F2保存文件​
map <F3> :q<CR> " 按F3退出Vim
```

## 六、常用插件推荐

| 插件名称          | 核心功能               | 安装方式（以 Vim-Plug 为例）            |
| ------------- | ------------------ | ------------------------------ |
| NERDTree      | 树状文件管理，方便浏览目录      | Plug 'preservim/nerdtree'      |
| YouCompleteMe | 智能代码补全，支持多语言       | Plug 'ycm-core/YouCompleteMe'  |
| vim-airline   | 美化状态栏，显示文件信息、模式等   | Plug 'vim-airline/vim-airline' |
| gruvbox       | 经典主题插件，支持浅色 / 深色模式 | Plug 'morhetz/gruvbox'         |