
ps 命令可以一次性给出当前系统中进程状态，但使用此方式得到的信息缺乏时效性。如果需要实时的监控程序的运行情况，可以通过 top 命令，该命令可以**实时的动态刷新进程的执行情况**。




# top命令执行结果解读

##  1. 系统整体状态

```bash
top - 14:30:25 up 12 days,  3:45,  2 users,  load average: 0.85, 0.72, 0.65
Tasks: 230 total,   1 running, 229 sleeping,   0 stopped,   0 zombie
%Cpu(s):  5.2 us,  2.1 sy,  0.0 ni, 92.6 id,  0.1 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :  15982.3 total,   3456.7 free,   8762.1 used,   3763.5 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   6542.3 avail Mem
```


- **第 1 行：任务队列信息**
    
    - `14:30:25`：当前系统时间
    - `up 12 days, 3:45`：系统运行时间（12 天 3 小时 45 分钟）
    - `2 users`：当前登录用户数
    - `load average: 0.85, 0.72, 0.65`：系统负载（1 分钟、5 分钟、15 分钟内的平均进程数，数值接近 CPU 核心数为正常）
- **第 2 行：进程统计**
    
    - `230 total`：总进程数
    - `1 running`：正在运行的进程数
    - `229 sleeping`：休眠的进程数
    - `0 stopped`：停止的进程数
    - `0 zombie`：僵尸进程数（需关注，非 0 可能有问题）
- **第 3 行：CPU 使用率（`%Cpu(s)`）**
    
    - `5.2 us`：用户空间 CPU 使用率（应用程序消耗）
    - `2.1 sy`：内核空间 CPU 使用率（系统调用消耗）
    - `0.0 ni`：优先级调整过的进程 CPU 使用率
    - `92.6 id`：空闲 CPU 百分比（越低表示 CPU 越繁忙）
    - `0.1 wa`：等待 IO 的 CPU 时间（越高表示磁盘 / 网络 IO 可能瓶颈）
    - `0.0 hi`/`0.0 si`：硬件 / 软件中断消耗的 CPU 时间
    - `0.0 st`：被虚拟机偷走的 CPU 时间（仅虚拟机中有效）
- **第 4-5 行：内存 / 交换分区使用**
    
    - `total`：总容量
    - `free`：完全空闲的内存
    - `used`：已使用的内存
    - `buff/cache`：用于缓存文件的内存（可释放）
    - `avail Mem`：可用内存（实际可分配给新进程的内存）

## 2. 进程列表（列含义）

```bash
  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
  12345 root      20   0  123456  78900  45600 S   5.2  0.5   2:30.15 java
  67890 www       20   0   98765  34500  23400 R   3.1  0.2   1:15.30 nginx
```

- **`PID`**：进程 ID（唯一标识）
- **`USER`**：进程所有者
- **`PR`/`NI`**：优先级（`PR` 是实际优先级，`NI` 是 nice 值，范围 -20~19，值越小优先级越高）
- **`VIRT`**：进程使用的虚拟内存总量（包括未使用的）
- **`RES`**：进程使用的物理内存（实际占用的内存，不包括交换分区）
- **`SHR`**：共享内存大小（可与其他进程共享的内存）
- **`S`**：进程状态（`R` 运行中，`S` 休眠，`Z` 僵尸，`T` 停止等）
- **`%CPU`**：进程占用的 CPU 百分比（自上次刷新以来）
- **`%MEM`**：进程占用的内存百分比
- **`TIME+`**：进程累计使用的 CPU 时间
- **`COMMAND`**：进程对应的命令（程序名或路径）



# 常用命令

1. 如果只想让 top 命令查看某个进程，就可以使用 "-p 选项"。
```bash
[root@localhost ~]# top -p 15273
#只查看 PID为 15273的apache进程
```



# 交互选项

| 快捷键         | 功能                                | 使用场景                         |
| ----------- | --------------------------------- | ---------------------------- |
| **`P`**（大写） | 按 **CPU 使用率（% CPU）** 降序排序（默认排序方式） | 找出最消耗 CPU 的进程（如卡顿、负载高时）      |
| **`M`**（大写） | 按 **内存使用率（% MEM）** 降序排序           | 排查内存占用过高的进程（如内存溢出）           |
| **`T`**（大写） | 按 **累计 CPU 时间（TIME+）** 降序排序       | 查看总消耗 CPU 时间最长的进程（长期运行的资源大户） |
| **`N`**（大写） | 按 **进程 ID（PID）** 降序排序             | 快速找到最新启动的进程（PID 通常递增）        |


| 快捷键     | 功能              | 使用场景                                                       |
| ------- | --------------- | ---------------------------------------------------------- |
| **`u`** | 筛选指定用户的进程       | 输入 `u` 后，再输入用户名（如 `root`），仅显示该用户的进程                        |
| **`k`** | 杀死指定进程          | 输入 `k` 后，再输入进程 PID（如 `12345`），按回车发送终止信号（默认 `15`，强制杀死用 `9`） |
| **`o`** | 按条件筛选进程（更灵活的过滤） | 输入 `o` 后，可按字段写条件，如 `%cpu>10` 只显示 CPU 使用率超 10% 的进程          |





> [!attention]
> mac 上的 top 命令和 linux 上的 top 命令显示存在差别，mac 上可以通过 `brew install htop`安装 htop，来获取更贴近 linux 的 top 使用效果。
